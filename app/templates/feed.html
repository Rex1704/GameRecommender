{% extends "base.html" %}
{% block content %}
<div class="row mt-5">
    <h2 class="fw-semibold mb-3">Recommended Games</h2>
    {% for game in recommendations %}
    <div class="col-md-3 col-sm-6 mb-3">
      <a href="{{ url_for('main.game_detail', game_id=game.id) }}" class="text-decoration-none">
        <div class="card shadow-sm h-100 hover-card">
          <img src="{{ game.background_image if game.background_image else ph_url(game.name, 300, 400) }}"
               class="card-img-top" alt="{{ game.name }}" loading="lazy"
               style="filter: blur(20px); transition: filter 0.3s;"
               onload="this.style.filter='none';">
          <div class="card-body">
            <h6 class="card-title text-dark">{{ game.name }}</h6>
            <p class="text-muted small mb-0">{{ game.genres }}</p>
            <form action="{{ url_for('main.mark_played', game_id=game['id']) }}" method="POST" class="position-absolute top-0 end-0 m-2">
              {% if game['id'] in played_list %}
                <button type="submit" class="btn btn-success">Played</button>
              {% else %}
                <button type="submit" class="btn btn-outline-secondary">Mark Played</button>
              {% endif %}
            </form>
          </div>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
{% endblock %}
