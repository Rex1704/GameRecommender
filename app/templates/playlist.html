{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-3">{{ playlist.name }}</h2>

  <div class="d-flex justify-content-between mb-3">
    <form method="POST" action="{{ url_for('playlist.delete', playlist_id=playlist.id) }}">
      <button type="submit" class="btn btn-danger">Delete Playlist</button>
    </form>

    <form method="POST" action="{{ url_for('playlist.arrange_playlist', playlist_id=playlist.id) }}">
      <div>
        <select name="order_type" id="order-type" class="form-select d-inline w-auto">
          <option value="alpha" {% if order == 'alpha' %} selected {% endif %} >Alphabetical</option>
          <option value="release" {% if order == 'release' %} selected {% endif %} >Release Date</option>
          <option value="playtime" {% if order == 'playtime' %} selected {% endif %} >Time to Complete</option>
          <option value="special" {% if order == 'special' %} selected {% endif %} >Special (Optimized)</option>
        </select>
        <button type="submit" class="btn btn-primary">Arrange</button>
      </div>
    </form>
  </div>

  <div class="row mt-5">
    {% for game in games %}
    <div class="col-md-3 col-sm-6 mb-3">
      <a href="{{ url_for('main.game_detail', game_id=game.id) }}" class="text-decoration-none">
        <div class="card shadow-sm h-100 hover-card">
          <img src="{{ game.background_image if game.background_image else ph_url(game.name, 300, 400) }}"
               class="card-img-top" alt="{{ game.name }}" loading="lazy"
               style="filter: blur(20px); transition: filter 0.3s;"
               onload="this.style.filter='none';">
          <div class="card-body">
            <h6 class="card-title text-dark">{{ game.name }}</h6>
            <p class="text-muted small mb-0"><b> Genres: </b>{{ game.genres }}</p>
            <p class="text-muted small mb-0"><b> Rating: </b>{{ game.rating }}</p>
            <p class="text-muted small mb-0"><b> Released: </b>{{ game.released }}</p>
          </div>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
